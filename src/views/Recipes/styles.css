/* ============================================
   SISTEMA DE ANIMACIONES FLUIDAS Y AGRADABLES
   PARA RECETAS - REINGENIERÍA COMPLETA
   ============================================ */

/* Variables CSS para controlar las animaciones */
:root {
  --recipe-transition-duration: 0.45s;
  --recipe-transition-easing: cubic-bezier(0.34, 1.56, 0.64, 1);
  --recipe-hover-easing: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --recipe-filter-duration: 0.35s;
}

/* Estado base de las cards con transiciones suaves */
.recipe-card {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: 
    opacity var(--recipe-transition-duration) var(--recipe-transition-easing),
    transform var(--recipe-transition-duration) var(--recipe-transition-easing),
    box-shadow 0.3s var(--recipe-hover-easing),
    filter var(--recipe-filter-duration) ease;
  will-change: transform, opacity;
}

/* Estado inicial antes de la animación */
.recipe-card.animating-in {
  opacity: 0;
  transform: translateY(40px) scale(0.92);
}

/* Animación de entrada inicial suave y elástica */
.recipe-card.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* Efecto stagger mejorado con delays progresivos */
.recipe-card:nth-child(1) { transition-delay: 0ms, 0ms, 0ms; }
.recipe-card:nth-child(2) { transition-delay: 60ms, 60ms, 0ms; }
.recipe-card:nth-child(3) { transition-delay: 120ms, 120ms, 0ms; }
.recipe-card:nth-child(4) { transition-delay: 180ms, 180ms, 0ms; }
.recipe-card:nth-child(5) { transition-delay: 240ms, 240ms, 0ms; }
.recipe-card:nth-child(6) { transition-delay: 300ms, 300ms, 0ms; }
.recipe-card:nth-child(7) { transition-delay: 360ms, 360ms, 0ms; }
.recipe-card:nth-child(8) { transition-delay: 420ms, 420ms, 0ms; }
.recipe-card:nth-child(n+9) { transition-delay: 480ms, 480ms, 0ms; }

/* Hover effect fluido y satisfactorio */
.recipe-card.visible:hover {
  transform: translateY(-12px) scale(1.03);
  box-shadow: 
    0 24px 48px -12px rgba(0, 0, 0, 0.18),
    0 12px 20px -8px rgba(240, 79, 0, 0.15),
    0 0 0 1px rgba(255, 255, 255, 0.1);
  z-index: 10;
}

/* Efecto de click con feedback inmediato */
.recipe-card.visible:active {
  transform: translateY(-6px) scale(1.01);
  transition-duration: 0.1s;
}

/* Estados de filtrado: ocultar con animación suave */
.recipe-card.filter-hide {
  opacity: 0;
  transform: translateY(-20px) scale(0.9);
  pointer-events: none;
  transition-duration: var(--recipe-filter-duration);
  transition-delay: 0ms;
}

/* Estados de filtrado: mostrar con animación elegante */
.recipe-card.filter-show {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

/* Animación específica para cuando se aplican filtros */
.filtering .recipe-card.filter-show {
  animation: recipe-filter-appear 0.5s var(--recipe-transition-easing) forwards;
}

@keyframes recipe-filter-appear {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.9) rotateX(10deg);
  }
  60% {
    transform: translateY(-5px) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1) rotateX(0deg);
  }
}

/* Estilo para las secciones del grid con transición suave */
#featuredSection,
#recipesGrid {
  transition: 
    opacity 0.4s ease,
    transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

#featuredSection.section-hide,
#recipesGrid.section-hide {
  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
}

/* Animaciones suaves para mensajes de sin resultados */
#noResults,
#noResultsGrid {
  transition: opacity 0.3s ease, transform 0.3s ease;
  opacity: 0;
  transform: scale(0.95);
}

#noResults.show,
#noResultsGrid.show {
  opacity: 1;
  transform: scale(1);
}

/* Efecto de brillo sutil al pasar el mouse (opcional) */
.recipe-card.visible::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: left 0.5s;
  pointer-events: none;
  z-index: 1;
}

.recipe-card.visible:hover::before {
  left: 100%;
}

/* Optimización de rendimiento */
.recipe-card {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Preferencia de movimiento reducido para accesibilidad */
@media (prefers-reduced-motion: reduce) {
  :root {
    --recipe-transition-duration: 0.01ms;
    --recipe-filter-duration: 0.01ms;
  }
  
  .recipe-card,
  .recipe-card.visible,
  .recipe-card.visible:hover,
  .recipe-card.visible:active,
  .filtering .recipe-card.filter-show {
    animation: none !important;
    transform: none !important;
    transition: opacity 0.01ms !important;
  }
  
  .recipe-card.visible::before {
    display: none;
  }
}

/* Mejora visual en dispositivos táctiles */
@media (hover: none) and (pointer: coarse) {
  .recipe-card.visible:hover {
    transform: translateY(-6px) scale(1.02);
  }
  
  .recipe-card.visible::before {
    display: none;
  }
}
