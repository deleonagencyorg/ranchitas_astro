---
// RecipeCardLarge.astro - Tarjeta grande para recetas destacadas
import { getLocale } from '../../i18n/i18n';

interface Props {
  image: string;
  title: string;
  time?: string;
  id: string;
  difficulty?: string;
  product?: string;
  category?: string;
}

const { 
  image, 
  title, 
  time = "15 min", 
  id,
  difficulty = "Fácil",
  product = "",
  category = "Cena"
} = Astro.props;

const currentLocale = getLocale();
const recipeLink = `/${currentLocale}/${currentLocale === 'es' ? 'recetas' : 'recipes'}/${id}`;
const viewRecipeText = currentLocale === 'es' ? 'Ver receta' : 'View recipe';

// Traducir categorías
const categoryTranslations: Record<string, string> = {
  'breakfast': currentLocale === 'es' ? 'Desayuno' : 'Breakfast',
  'brunch': 'Brunch',
  'lunch': currentLocale === 'es' ? 'Almuerzo' : 'Lunch',
  'dinner': currentLocale === 'es' ? 'Cena' : 'Dinner',
  'snack': currentLocale === 'es' ? 'Snack' : 'Snack'
};

const displayCategory = categoryTranslations[category.toLowerCase()] || category;

// Formatear el slug del producto: quitar guiones y capitalizar cada palabra
function formatProductName(slug: string): string {
  return slug
    .split('-')
    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
    .join(' ');
}

const displayProduct = product ? formatProductName(product) : '';
---

<a 
  href={recipeLink} 
  class="block group overflow-hidden rounded-[2.5rem] bg-white shadow-lg hover:shadow-2xl transition-all duration-300"
>
  <!-- Imagen principal -->
  <div class="relative h-[400px] lg:h-[400px] overflow-hidden">
    <img 
      src={image} 
      alt={title}
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
    />
    
    <!-- Badge de categoría (Cena, Almuerzo, etc) -->
    <div class="absolute top-6 left-6 bg-[#F04F00] text-white px-5 py-2 rounded-full text-sm font-bold shadow-md">
      {displayCategory}
    </div>
    
    <!-- Badge de tiempo -->
    {time && (
      <div class="absolute top-6 right-6 bg-white text-gray-800 px-5 py-2 rounded-full text-sm font-bold shadow-md">
        {time}
      </div>
    )}
  </div>
  
  <!-- Contenido inferior -->
  <div class="p-8 bg-white">
    <!-- Título -->
    <h3 class="text-3xl font-bold text-black mb-4 leading-tight">
      {title}
    </h3>
    
    <!-- Dificultad y Producto en líneas separadas -->
    <div class="flex items-center gap-3 mb-4">
      <span class="text-[#F04F00] font-bold text-lg">
        {difficulty}
      </span>
      {displayProduct && (
        <span class="text-gray-500 text-base font-normal">
          {currentLocale === 'es' ? 'Con' : 'With'} {displayProduct}
        </span>
      )}
    </div>
    
    <!-- Ver receta link -->
    <div class="flex items-center text-[#F04F00] font-bold text-base group-hover:translate-x-2 transition-transform">
      {viewRecipeText} →
    </div>
  </div>
</a>